# agent_math.py
import asyncio
import websockets
import json

async def math_bot():
    async with websockets.connect("ws://localhost:8765") as websocket:
        print("Math Bot connected!")
        while True:
            msg = await websocket.recv()
            data = json.loads(msg)
            if data["type"] == "task" and "math" in data["content"]:
                expr = data["content"].replace("math ", "")
                try:
                    result = eval(expr)
                    response = {
                        "sender": "MathBot",
                        "type": "response",
                        "content": f"The answer to {expr} is {result}"
                    }
                    await websocket.send(json.dumps(response))
                except:
                    pass

asyncio.run(math_bot())
